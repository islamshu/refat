import{c as d,d as p,cs as f,D as g,T as y,lw as S,v as C,l as b,aO as v,q as k,cx as h,cB as w,cI as P}from"./app.js";var E=(o=>(o.Generic="generic",o.SignInFailed="sign_in_failed",o.ContinueWithShopPay="continue_with_shop_pay",o))(E||{});const I=d(null);function x(){return p(I)}const M=o=>({backgroundColor:e,foregroundColor:n})=>{const s=m(e),t=m(n),a=Math.max(s,t),r=Math.min(s,t),c=(a+.05)/(r+.05);return{isValidContrast:c>=o,ratio:Math.round(c*100)/100}},_=M(3.06);function m(o){const n=o.toRgbTuple().map(s=>{const t=s/255;return t<=.04045?t/12.92:((t+.055)/1.055)**2.4});return .2126*n[0]+.7152*n[1]+.0722*n[2]}const u=new S(0,0,100);function A({foregroundColor:o,backgroundColor:e,section:n="main"}){const s=f(),{colors:t}=g(),a=s[n];let r=u;if(e!==void 0)r=e;else if(a.colorScheme==="inherit"){const{background:i,colorScheme:l}=s.canvas;l&&i!=="transparent"&&(r=t.schemes?.[l]?.base?.background??u)}else{const i=a.colorScheme;r=i?t.schemes?.[i]?.base?.background??u:u}const{isValidContrast:c}=y(()=>_({backgroundColor:r,foregroundColor:o}),[r,o]);return c}function F(){const o=C(),e=b(),n=v();return{openModal:k(t=>{const a=n.read(h.flow).value;a===w.UnauthenticatedUser?n.write(h.unauthenticatedErrorModal,t):o.notify(new P("Cannot open an unauthenticated error modal outside of the unauthenticated flow"),{severity:"error",metadata:{source:{type:e.type},checkout:{token:e.checkoutSessionIdentifier||e.sourceId},event:{modalType:t.type,shopPayFlow:a}}})},[o,e,n])}}export{E as U,F as a,A as b,x as u};
